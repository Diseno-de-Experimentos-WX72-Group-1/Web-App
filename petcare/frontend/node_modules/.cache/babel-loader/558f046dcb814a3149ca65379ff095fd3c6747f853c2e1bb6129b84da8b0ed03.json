{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mt-5\"\n};\nconst _hoisted_2 = {\n  class: \"form-group\"\n};\nconst _hoisted_3 = {\n  class: \"form-group\"\n};\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = {\n  type: \"submit\",\n  class: \"btn btn-primary w-100\"\n};\nconst _hoisted_7 = {\n  class: \"list-group mb-4\"\n};\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[10] || (_cache[10] = _createElementVNode(\"h1\", {\n    class: \"text-center\"\n  }, \"Lista de Mascotas\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.irADescripcion && $options.irADescripcion(...args)),\n    class: \"btn btn-primary\"\n  }, \"Solicitar Servicio a Domicilio\"), _createElementVNode(\"form\", {\n    onSubmit: _cache[5] || (_cache[5] = _withModifiers((...args) => $options.guardarMascota && $options.guardarMascota(...args), [\"prevent\"])),\n    class: \"mb-4\"\n  }, [_createElementVNode(\"div\", _hoisted_2, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    for: \"nombre\"\n  }, \"Nombre:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.mascota.nombre = $event),\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.mascota.nombre]])]), _createElementVNode(\"div\", _hoisted_3, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    for: \"especie\"\n  }, \"Especie:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.mascota.especie = $event),\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.mascota.especie]])]), _createElementVNode(\"div\", _hoisted_4, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    for: \"raza\"\n  }, \"Raza:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.mascota.raza = $event),\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.mascota.raza]])]), _createElementVNode(\"div\", _hoisted_5, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    for: \"edad\"\n  }, \"Edad:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.mascota.edad = $event),\n    class: \"form-control\",\n    required: \"\",\n    min: \"1\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.mascota.edad]])]), _createElementVNode(\"button\", _hoisted_6, _toDisplayString($data.editMode ? 'Actualizar Mascota' : 'Registrar Mascota'), 1 /* TEXT */)], 32 /* NEED_HYDRATION */), _cache[11] || (_cache[11] = _createElementVNode(\"h2\", {\n    class: \"text-center\"\n  }, \"Listado de Mascotas\", -1 /* HOISTED */)), _createElementVNode(\"ul\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.mascotas, mascota => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: mascota.id,\n      class: \"list-group-item d-flex justify-content-between align-items-center\"\n    }, [_createElementVNode(\"div\", null, [_createElementVNode(\"strong\", null, _toDisplayString(mascota.nombre), 1 /* TEXT */), _createTextVNode(\" - \" + _toDisplayString(mascota.especie), 1 /* TEXT */)]), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.editarMascota(mascota),\n      class: \"btn btn-warning btn-sm\"\n    }, \"Editar\", 8 /* PROPS */, _hoisted_8), _createElementVNode(\"button\", {\n      onClick: $event => $options.eliminarMascota(mascota.id),\n      class: \"btn btn-danger btn-sm\"\n    }, \"Eliminar\", 8 /* PROPS */, _hoisted_9)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]);\n}","map":{"version":3,"names":["class","type","_createElementBlock","_hoisted_1","_createElementVNode","onClick","_cache","args","$options","irADescripcion","onSubmit","_withModifiers","guardarMascota","_hoisted_2","for","$event","$data","mascota","nombre","required","_hoisted_3","especie","_hoisted_4","raza","_hoisted_5","edad","min","_hoisted_6","_toDisplayString","editMode","_hoisted_7","_Fragment","_renderList","mascotas","key","id","_createTextVNode","editarMascota","_hoisted_8","eliminarMascota","_hoisted_9"],"sources":["D:\\CAMILA\\UPC\\Ciclo 6\\Diseño de Experimentos\\Trabajo grupal\\Web-App\\petcare\\frontend\\src\\components\\MascotasList.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mt-5\">\r\n    <h1 class=\"text-center\">Lista de Mascotas</h1>\r\n    <button @click=\"irADescripcion\" class=\"btn btn-primary\">Solicitar Servicio a Domicilio</button>\r\n    <form @submit.prevent=\"guardarMascota\" class=\"mb-4\">\r\n      <div class=\"form-group\">\r\n        <label for=\"nombre\">Nombre:</label>\r\n        <input type=\"text\" v-model=\"mascota.nombre\" class=\"form-control\" required />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"especie\">Especie:</label>\r\n        <input type=\"text\" v-model=\"mascota.especie\" class=\"form-control\" required />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"raza\">Raza:</label>\r\n        <input type=\"text\" v-model=\"mascota.raza\" class=\"form-control\" required />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"edad\">Edad:</label>\r\n        <input type=\"number\" v-model=\"mascota.edad\" class=\"form-control\" required min=\"1\" />\r\n      </div>\r\n      <button type=\"submit\" class=\"btn btn-primary w-100\">\r\n        {{ editMode ? 'Actualizar Mascota' : 'Registrar Mascota' }}\r\n      </button>\r\n    </form>\r\n\r\n    <h2 class=\"text-center\">Listado de Mascotas</h2>\r\n    <ul class=\"list-group mb-4\">\r\n      <li v-for=\"mascota in mascotas\" :key=\"mascota.id\" class=\"list-group-item d-flex justify-content-between align-items-center\">\r\n        <div>\r\n          <strong>{{ mascota.nombre }}</strong> - {{ mascota.especie }}\r\n        </div>\r\n        <div>\r\n          <button @click=\"editarMascota(mascota)\" class=\"btn btn-warning btn-sm\">Editar</button>\r\n          <button @click=\"eliminarMascota(mascota.id)\" class=\"btn btn-danger btn-sm\">Eliminar</button>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      mascotas: [],\r\n      mascota: {\r\n        id: null,\r\n        nombre: '',\r\n        especie: '',\r\n        raza: '',\r\n        edad: 1,\r\n        duenio: {\r\n          id: null,\r\n        },\r\n      },\r\n      editMode: false,\r\n      userId: null,\r\n    };\r\n  },\r\n  created() {\r\n    this.userId = this.$route.params.id; // Obtén el ID del dueño desde los parámetros de la ruta\r\n    this.cargarMascotas(); // Carga las mascotas al iniciar el componente\r\n  },\r\n  methods: {\r\n    irADescripcion() {\r\n      // Redirige a la vista de descripción pasando el userId\r\n      this.$router.push({ name: 'solicitarserviciocliente', params: { id: this.userId } });\r\n    },\r\n    async cargarMascotas() {\r\n      try {\r\n        const response = await fetch(`https://java3000-g8cthucjhvgad2c3.canadacentral-01.azurewebsites.net/api/mascotas?duenoId=${this.userId}`);\r\n        if (!response.ok) {\r\n          throw new Error(`Error al cargar las mascotas: ${response.statusText}`);\r\n        }\r\n        this.mascotas = await response.json();\r\n      } catch (error) {\r\n        console.error(error.message);\r\n      }\r\n    },\r\n    async guardarMascota() {\r\n      this.mascota.duenio.id = this.userId;\r\n      const method = this.editMode ? 'PUT' : 'POST';\r\n      const url = this.editMode ? `https://java3000-g8cthucjhvgad2c3.canadacentral-01.azurewebsites.net/api/mascotas/${this.mascota.id}` : 'https://java3000-g8cthucjhvgad2c3.canadacentral-01.azurewebsites.net/api/mascotas/registrar';\r\n\r\n      try {\r\n        const response = await fetch(url, {\r\n          method: method,\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            ...this.mascota,\r\n            duenio: { id: this.mascota.duenio.id },\r\n          }),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`Error al guardar la mascota: ${response.statusText}`);\r\n        }\r\n\r\n        this.limpiarFormulario();\r\n        this.cargarMascotas(); // Recarga la lista de mascotas\r\n      } catch (error) {\r\n        console.error(error.message);\r\n      }\r\n    },\r\n    limpiarFormulario() {\r\n      this.mascota = {\r\n        id: null,\r\n        nombre: '',\r\n        especie: '',\r\n        raza: '',\r\n        edad: 1,\r\n        duenio: {\r\n          id: null,\r\n        },\r\n      };\r\n      this.editMode = false;\r\n    },\r\n    editarMascota(mascota) {\r\n      this.mascota = { ...mascota, duenio: { id: mascota.duenio.id } };\r\n      this.editMode = true;\r\n    },\r\n    async eliminarMascota(id) {\r\n      const confirmDelete = confirm(\"¿Estás seguro de que deseas eliminar esta mascota?\");\r\n      if (confirmDelete) {\r\n        try {\r\n          const response = await fetch(`https://java3000-g8cthucjhvgad2c3.canadacentral-01.azurewebsites.net/api/mascotas/${id}`, {\r\n            method: 'DELETE',\r\n          });\r\n\r\n          if (!response.ok) {\r\n            throw new Error(`Error al eliminar la mascota: ${response.statusText}`);\r\n          }\r\n\r\n          this.cargarMascotas(); // Recargar la lista de mascotas\r\n        } catch (error) {\r\n          console.error(error.message);\r\n        }\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Tus estilos aquí */\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAgB;;EAIlBA,KAAK,EAAC;AAAY;;EAIlBA,KAAK,EAAC;AAAY;;EAIlBA,KAAK,EAAC;AAAY;;EAIlBA,KAAK,EAAC;AAAY;;EAIfC,IAAI,EAAC,QAAQ;EAACD,KAAK,EAAC;;;EAM1BA,KAAK,EAAC;AAAiB;mBA3B/B;mBAAA;;uBACEE,mBAAA,CAqCM,OArCNC,UAqCM,G,4BApCJC,mBAAA,CAA8C;IAA1CJ,KAAK,EAAC;EAAa,GAAC,mBAAiB,sBACzCI,mBAAA,CAA+F;IAAtFC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,cAAA,IAAAD,QAAA,CAAAC,cAAA,IAAAF,IAAA,CAAc;IAAEP,KAAK,EAAC;KAAkB,gCAA8B,GACtFI,mBAAA,CAoBO;IApBAM,QAAM,EAAAJ,MAAA,QAAAA,MAAA,MAJjBK,cAAA,KAAAJ,IAAA,KAI2BC,QAAA,CAAAI,cAAA,IAAAJ,QAAA,CAAAI,cAAA,IAAAL,IAAA,CAAc;IAAEP,KAAK,EAAC;MAC3CI,mBAAA,CAGM,OAHNS,UAGM,G,0BAFJT,mBAAA,CAAmC;IAA5BU,GAAG,EAAC;EAAQ,GAAC,SAAO,sB,gBAC3BV,mBAAA,CAA4E;IAArEH,IAAI,EAAC,MAAM;IAP1B,uBAAAK,MAAA,QAAAA,MAAA,MAAAS,MAAA,IAOoCC,KAAA,CAAAC,OAAO,CAACC,MAAM,GAAAH,MAAA;IAAEf,KAAK,EAAC,cAAc;IAACmB,QAAQ,EAAR;iDAArCH,KAAA,CAAAC,OAAO,CAACC,MAAM,E,KAE5Cd,mBAAA,CAGM,OAHNgB,UAGM,G,0BAFJhB,mBAAA,CAAqC;IAA9BU,GAAG,EAAC;EAAS,GAAC,UAAQ,sB,gBAC7BV,mBAAA,CAA6E;IAAtEH,IAAI,EAAC,MAAM;IAX1B,uBAAAK,MAAA,QAAAA,MAAA,MAAAS,MAAA,IAWoCC,KAAA,CAAAC,OAAO,CAACI,OAAO,GAAAN,MAAA;IAAEf,KAAK,EAAC,cAAc;IAACmB,QAAQ,EAAR;iDAAtCH,KAAA,CAAAC,OAAO,CAACI,OAAO,E,KAE7CjB,mBAAA,CAGM,OAHNkB,UAGM,G,0BAFJlB,mBAAA,CAA+B;IAAxBU,GAAG,EAAC;EAAM,GAAC,OAAK,sB,gBACvBV,mBAAA,CAA0E;IAAnEH,IAAI,EAAC,MAAM;IAf1B,uBAAAK,MAAA,QAAAA,MAAA,MAAAS,MAAA,IAeoCC,KAAA,CAAAC,OAAO,CAACM,IAAI,GAAAR,MAAA;IAAEf,KAAK,EAAC,cAAc;IAACmB,QAAQ,EAAR;iDAAnCH,KAAA,CAAAC,OAAO,CAACM,IAAI,E,KAE1CnB,mBAAA,CAGM,OAHNoB,UAGM,G,0BAFJpB,mBAAA,CAA+B;IAAxBU,GAAG,EAAC;EAAM,GAAC,OAAK,sB,gBACvBV,mBAAA,CAAoF;IAA7EH,IAAI,EAAC,QAAQ;IAnB5B,uBAAAK,MAAA,QAAAA,MAAA,MAAAS,MAAA,IAmBsCC,KAAA,CAAAC,OAAO,CAACQ,IAAI,GAAAV,MAAA;IAAEf,KAAK,EAAC,cAAc;IAACmB,QAAQ,EAAR,EAAQ;IAACO,GAAG,EAAC;iDAAhDV,KAAA,CAAAC,OAAO,CAACQ,IAAI,E,KAE5CrB,mBAAA,CAES,UAFTuB,UAES,EAAAC,gBAAA,CADJZ,KAAA,CAAAa,QAAQ,8D,wDAIfzB,mBAAA,CAAgD;IAA5CJ,KAAK,EAAC;EAAa,GAAC,qBAAmB,sBAC3CI,mBAAA,CAUK,MAVL0B,UAUK,I,kBATH5B,mBAAA,CAQK6B,SAAA,QApCXC,WAAA,CA4B4BhB,KAAA,CAAAiB,QAAQ,EAAnBhB,OAAO;yBAAlBf,mBAAA,CAQK;MAR4BgC,GAAG,EAAEjB,OAAO,CAACkB,EAAE;MAAEnC,KAAK,EAAC;QACtDI,mBAAA,CAEM,cADJA,mBAAA,CAAqC,gBAAAwB,gBAAA,CAA1BX,OAAO,CAACC,MAAM,kBA9BnCkB,gBAAA,CA8B+C,KAAG,GAAAR,gBAAA,CAAGX,OAAO,CAACI,OAAO,iB,GAE5DjB,mBAAA,CAGM,cAFJA,mBAAA,CAAsF;MAA7EC,OAAK,EAAAU,MAAA,IAAEP,QAAA,CAAA6B,aAAa,CAACpB,OAAO;MAAGjB,KAAK,EAAC;OAAyB,QAAM,iBAjCvFsC,UAAA,GAkCUlC,mBAAA,CAA4F;MAAnFC,OAAK,EAAAU,MAAA,IAAEP,QAAA,CAAA+B,eAAe,CAACtB,OAAO,CAACkB,EAAE;MAAGnC,KAAK,EAAC;OAAwB,UAAQ,iBAlC7FwC,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}