{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mt-5\"\n};\nconst _hoisted_2 = {\n  class: \"mb-3\"\n};\nconst _hoisted_3 = {\n  class: \"mb-3\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"mt-3 alert alert-danger\",\n  role: \"alert\"\n};\nconst _hoisted_5 = {\n  class: \"text-center mt-3\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[8] || (_cache[8] = _createElementVNode(\"h1\", {\n    class: \"text-center\"\n  }, \"Inicio de Sesión\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.iniciarSesion && $options.iniciarSesion(...args), [\"prevent\"])),\n    class: \"mt-4\"\n  }, [_createElementVNode(\"div\", _hoisted_2, [_cache[3] || (_cache[3] = _createElementVNode(\"label\", {\n    for: \"correo\",\n    class: \"form-label\"\n  }, \"Correo:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.loginRequest.correo = $event),\n    id: \"correo\",\n    type: \"email\",\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.loginRequest.correo]])]), _createElementVNode(\"div\", _hoisted_3, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n    for: \"contraseña\",\n    class: \"form-label\"\n  }, \"Contraseña:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.loginRequest.contraseña = $event),\n    id: \"contraseña\",\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.loginRequest.contraseña]])]), _cache[5] || (_cache[5] = _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary w-100\"\n  }, \"Iniciar Sesión\", -1 /* HOISTED */))], 32 /* NEED_HYDRATION */), $data.mensaje ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _toDisplayString($data.mensaje), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Botón de registrarse \"), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"p\", null, [_cache[7] || (_cache[7] = _createTextVNode(\"¿No tienes una cuenta? \")), _createVNode(_component_router_link, {\n    to: \"/registro\",\n    class: \"btn btn-link\"\n  }, {\n    default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"Registrarse\")])),\n    _: 1 /* STABLE */\n  })])])]);\n}","map":{"version":3,"names":["class","key","role","_createElementBlock","_hoisted_1","_createElementVNode","onSubmit","_cache","_withModifiers","args","$options","iniciarSesion","_hoisted_2","for","$event","$data","loginRequest","correo","id","type","required","_hoisted_3","contraseña","mensaje","_hoisted_4","_toDisplayString","_createCommentVNode","_hoisted_5","_createTextVNode","_createVNode","_component_router_link","to","default","_withCtx","_"],"sources":["D:\\CAMILA\\UPC\\Ciclo 6\\Diseño de Experimentos\\Trabajo grupal\\Web-App\\petcare\\frontend\\src\\components\\LoginComponent.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mt-5\">\r\n    <h1 class=\"text-center\">Inicio de Sesión</h1>\r\n    <form @submit.prevent=\"iniciarSesion\" class=\"mt-4\">\r\n      <div class=\"mb-3\">\r\n        <label for=\"correo\" class=\"form-label\">Correo:</label>\r\n        <input \r\n          v-model=\"loginRequest.correo\" \r\n          id=\"correo\" \r\n          type=\"email\" \r\n          class=\"form-control\" \r\n          required \r\n        />\r\n      </div>\r\n      <div class=\"mb-3\">\r\n        <label for=\"contraseña\" class=\"form-label\">Contraseña:</label>\r\n        <input \r\n          type=\"password\" \r\n          v-model=\"loginRequest.contraseña\" \r\n          id=\"contraseña\" \r\n          class=\"form-control\" \r\n          required \r\n        />\r\n      </div>\r\n      <button type=\"submit\" class=\"btn btn-primary w-100\">Iniciar Sesión</button>\r\n    </form>\r\n    \r\n    <div v-if=\"mensaje\" class=\"mt-3 alert alert-danger\" role=\"alert\">\r\n      {{ mensaje }}\r\n    </div>\r\n\r\n    <!-- Botón de registrarse -->\r\n    <div class=\"text-center mt-3\">\r\n      <p>¿No tienes una cuenta? <router-link to=\"/registro\" class=\"btn btn-link\">Registrarse</router-link></p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from '../utils/axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      loginRequest: {\r\n        correo: '',\r\n        contraseña: '',\r\n      },\r\n      mensaje: '',\r\n    };\r\n  },\r\n  methods: {\r\n    async iniciarSesion() {\r\n      try {\r\n        const response = await axios.post('/usuarios/login', this.loginRequest);\r\n        const rol = response.data.rol; // Ahora deberías poder obtener el rol\r\n\r\n        // Redirige según el rol\r\n        if (rol === 'dueno') {\r\n          const userId = response.data.id; \r\n          this.$router.push({ name: 'DashboardCliente', params: { id: userId } });\r\n        } else if (rol === 'veterinario') {\r\n          const userId = response.data.id; \r\n          this.$router.push({ name: 'DashboardVeterinario', params: { id: userId } });\r\n        } else if (rol === 'admin') {\r\n          const userId = response.data.id; \r\n          this.$router.push({ name: 'DassboardCiita', params: { id: userId } });\r\n        } else {\r\n          this.mensaje = 'Rol de usuario no reconocido';\r\n        }\r\n        \r\n      } catch (error) {\r\n        this.mensaje = 'Error al iniciar sesión: ' + (error.response?.data || error.message);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Estilos opcionales */\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAgB;;EAGlBA,KAAK,EAAC;AAAM;;EAUZA,KAAK,EAAC;AAAM;;EAdvBC,GAAA;EA2BwBD,KAAK,EAAC,yBAAyB;EAACE,IAAI,EAAC;;;EAKpDF,KAAK,EAAC;AAAkB;;;uBA/B/BG,mBAAA,CAkCM,OAlCNC,UAkCM,G,0BAjCJC,mBAAA,CAA6C;IAAzCL,KAAK,EAAC;EAAa,GAAC,kBAAgB,sBACxCK,mBAAA,CAsBO;IAtBAC,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAHjBC,cAAA,KAAAC,IAAA,KAG2BC,QAAA,CAAAC,aAAA,IAAAD,QAAA,CAAAC,aAAA,IAAAF,IAAA,CAAa;IAAET,KAAK,EAAC;MAC1CK,mBAAA,CASM,OATNO,UASM,G,0BARJP,mBAAA,CAAsD;IAA/CQ,GAAG,EAAC,QAAQ;IAACb,KAAK,EAAC;KAAa,SAAO,sB,gBAC9CK,mBAAA,CAME;IAZV,uBAAAE,MAAA,QAAAA,MAAA,MAAAO,MAAA,IAOmBC,KAAA,CAAAC,YAAY,CAACC,MAAM,GAAAH,MAAA;IAC5BI,EAAE,EAAC,QAAQ;IACXC,IAAI,EAAC,OAAO;IACZnB,KAAK,EAAC,cAAc;IACpBoB,QAAQ,EAAR;iDAJSL,KAAA,CAAAC,YAAY,CAACC,MAAM,E,KAOhCZ,mBAAA,CASM,OATNgB,UASM,G,0BARJhB,mBAAA,CAA8D;IAAvDQ,GAAG,EAAC,YAAY;IAACb,KAAK,EAAC;KAAa,aAAW,sB,gBACtDK,mBAAA,CAME;IALAc,IAAI,EAAC,UAAU;IAjBzB,uBAAAZ,MAAA,QAAAA,MAAA,MAAAO,MAAA,IAkBmBC,KAAA,CAAAC,YAAY,CAACM,UAAU,GAAAR,MAAA;IAChCI,EAAE,EAAC,YAAY;IACflB,KAAK,EAAC,cAAc;IACpBoB,QAAQ,EAAR;iDAHSL,KAAA,CAAAC,YAAY,CAACM,UAAU,E,+BAMpCjB,mBAAA,CAA2E;IAAnEc,IAAI,EAAC,QAAQ;IAACnB,KAAK,EAAC;KAAwB,gBAAc,qB,4BAGzDe,KAAA,CAAAQ,OAAO,I,cAAlBpB,mBAAA,CAEM,OAFNqB,UAEM,EAAAC,gBAAA,CADDV,KAAA,CAAAQ,OAAO,oBA5BhBG,mBAAA,gBA+BIA,mBAAA,0BAA6B,EAC7BrB,mBAAA,CAEM,OAFNsB,UAEM,GADJtB,mBAAA,CAAwG,Y,0BAjC9GuB,gBAAA,CAiCS,yBAAuB,IAAAC,YAAA,CAA0EC,sBAAA;IAA7DC,EAAE,EAAC,WAAW;IAAC/B,KAAK,EAAC;;IAjClEgC,OAAA,EAAAC,QAAA,CAiCiF,MAAW1B,MAAA,QAAAA,MAAA,OAjC5FqB,gBAAA,CAiCiF,aAAW,E;IAjC5FM,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}