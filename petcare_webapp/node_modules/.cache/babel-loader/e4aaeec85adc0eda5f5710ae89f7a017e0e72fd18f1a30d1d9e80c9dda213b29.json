{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      servicios: [],\n      servicio: {\n        idServicio: null,\n        mascota: {\n          id: null\n        },\n        veterinario: {\n          id: null\n        },\n        direccion: '',\n        estado: 'PENDIENTE' // Estado predeterminado\n      },\n      mensaje: '',\n      isEditing: false,\n      veterinarioNombre: '' // Nombre del veterinario\n    };\n  },\n  created() {\n    this.obtenerServicios();\n    this.obtenerNombreVeterinario(); // Cargar el nombre del veterinario al crear el componente\n  },\n  methods: {\n    irADescripcion() {\n      // Redirige a la vista de descripción\n      this.$router.push({\n        name: 'VeterinarioConsulta2'\n      });\n    },\n    async obtenerServicios() {\n      try {\n        const response = await axios.get('https://petandcareapi-bhbgcngtfkbufvfy.canadacentral-01.azurewebsites.net/api/servicios-domicilio');\n        const userId = this.$route.params.id; // Asegúrate de que userId es un número\n        // Filtra los servicios para mostrar solo los del veterinario correspondiente\n        this.servicios = response.data.filter(servicio => servicio.veterinario.id === Number(userId));\n      } catch (error) {\n        this.mensaje = 'Error al obtener servicios: ' + error.message;\n      }\n    },\n    async obtenerNombreVeterinario() {\n      try {\n        const userId = this.$route.params.id; // Obtener el ID del veterinario desde los parámetros de la ruta\n        const response = await axios.get(`https://petandcareapi-bhbgcngtfkbufvfy.canadacentral-01.azurewebsites.net/api/veterinarios/${userId}`);\n        this.veterinarioNombre = response.data.nombre; // Asumimos que el nombre está en la respuesta\n      } catch (error) {\n        console.error('Error al obtener el nombre del veterinario: ', error);\n      }\n    },\n    async guardarServicio() {\n      try {\n        if (this.isEditing) {\n          await axios.put(`https://petandcareapi-bhbgcngtfkbufvfy.canadacentral-01.azurewebsites.net/api/servicios-domicilio/${this.servicio.idServicio}`, this.servicio);\n          this.mensaje = 'Servicio actualizado exitosamente';\n        } else {\n          const response = await axios.post('https://petandcareapi-bhbgcngtfkbufvfy.canadacentral-01.azurewebsites.net/api/servicios-domicilio', this.servicio);\n          this.mensaje = 'Servicio solicitado exitosamente';\n          console.log(response);\n        }\n        this.obtenerServicios(); // Refresca la lista\n        this.resetForm(); // Resetea el formulario\n      } catch (error) {\n        this.mensaje = 'Error al guardar el servicio: ' + error.message;\n      }\n    },\n    editarServicio(servicio) {\n      this.servicio = {\n        ...servicio\n      };\n      this.isEditing = true;\n    },\n    async cancelarServicio(id) {\n      try {\n        await axios.delete(`https://petandcareapi-bhbgcngtfkbufvfy.canadacentral-01.azurewebsites.net/api/servicios-domicilio/${id}`);\n        this.mensaje = 'Servicio cancelado exitosamente';\n        this.obtenerServicios(); // Refresca la lista\n      } catch (error) {\n        this.mensaje = 'Error al cancelar el servicio: ' + error.message;\n      }\n    },\n    resetForm() {\n      this.servicio = {\n        idServicio: null,\n        mascota: {\n          id: null\n        },\n        veterinario: {\n          id: null\n        },\n        direccion: '',\n        estado: 'PENDIENTE'\n      };\n      this.isEditing = false;\n      this.mensaje = '';\n    }\n  }\n};","map":{"version":3,"names":["axios","data","servicios","servicio","idServicio","mascota","id","veterinario","direccion","estado","mensaje","isEditing","veterinarioNombre","created","obtenerServicios","obtenerNombreVeterinario","methods","irADescripcion","$router","push","name","response","get","userId","$route","params","filter","Number","error","message","nombre","console","guardarServicio","put","post","log","resetForm","editarServicio","cancelarServicio","delete"],"sources":["D:\\CAMILA\\UPC\\Ciclo 6\\Diseño de Experimentos\\Trabajo grupal\\Web-App\\petcare_webapp\\src\\components\\DashboardVeterinario.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mt-5\">\r\n    <h2 class=\"mb-4\">Solicitud de Servicio a Domicilio</h2>\r\n    <div class=\"alert alert-info\" v-if=\"veterinarioNombre\">\r\n      ¡Hola, Dr(a). {{ veterinarioNombre }}! ¿Cómo podemos ayudarle hoy?\r\n    </div>\r\n    \r\n    <button @click=\"irADescripcion\" class=\"btn btn-primary mb-4\">\r\n      Consultar Historial Médico\r\n    </button>\r\n\r\n    <form @submit.prevent=\"guardarServicio\" class=\"mb-4\">\r\n      <div class=\"mb-3\">\r\n        <label for=\"mascotaId\" class=\"form-label\">ID de Mascota:</label>\r\n        <input \r\n          type=\"number\" \r\n          id=\"mascotaId\" \r\n          v-model=\"servicio.mascota.id\" \r\n          class=\"form-control\" \r\n          required \r\n        />\r\n      </div>\r\n      <div class=\"mb-3\">\r\n        <label for=\"veterinarioId\" class=\"form-label\">ID de Veterinario:</label>\r\n        <input \r\n          type=\"number\" \r\n          id=\"veterinarioId\" \r\n          v-model=\"servicio.veterinario.id\" \r\n          class=\"form-control\" \r\n          required \r\n        />\r\n      </div>\r\n      <div class=\"mb-3\">\r\n        <label for=\"direccion\" class=\"form-label\">Dirección:</label>\r\n        <input \r\n          type=\"text\" \r\n          id=\"direccion\" \r\n          v-model=\"servicio.direccion\" \r\n          class=\"form-control\" \r\n          required \r\n        />\r\n      </div>\r\n      <div class=\"mb-3\">\r\n        <label for=\"estado\" class=\"form-label\">Estado:</label>\r\n        <select \r\n          id=\"estado\" \r\n          v-model=\"servicio.estado\" \r\n          class=\"form-select\"\r\n        >\r\n          <option value=\"PENDIENTE\">Pendiente</option>\r\n          <option value=\"REALIZADO\">Realizado</option>\r\n          <option value=\"CANCELADO\">Cancelado</option>\r\n        </select>\r\n      </div>\r\n      <button type=\"submit\" class=\"btn btn-primary\">\r\n        {{ isEditing ? 'Actualizar Servicio' : 'Solicitar Servicio' }}\r\n      </button>\r\n    </form>\r\n\r\n    <div v-if=\"mensaje\" class=\"alert alert-info\">{{ mensaje }}</div>\r\n\r\n    <h3>Servicios Programados</h3>\r\n    <table class=\"table table-striped\">\r\n      <thead>\r\n        <tr>\r\n          <th>ID</th>\r\n          <th>Dirección</th>\r\n          <th>Fecha de Solicitud</th>\r\n          <th>Estado</th>\r\n          <th>Acciones</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"servicio in servicios\" :key=\"servicio.idServicio\">\r\n          <td>{{ servicio.idServicio }}</td>\r\n          <td>{{ servicio.direccion }}</td>\r\n          <td>{{ servicio.fechaSolicitud }}</td>\r\n          <td>{{ servicio.estado }}</td>\r\n          <td>\r\n            <button @click=\"editarServicio(servicio)\" class=\"btn btn-warning btn-sm\">Editar</button>\r\n            <button @click=\"cancelarServicio(servicio.idServicio)\" class=\"btn btn-danger btn-sm\">Cancelar</button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      servicios: [],\r\n      servicio: {\r\n        idServicio: null,\r\n        mascota: {\r\n          id: null\r\n        },\r\n        veterinario: {\r\n          id: null\r\n        },\r\n        direccion: '',\r\n        estado: 'PENDIENTE' // Estado predeterminado\r\n      },\r\n      mensaje: '',\r\n      isEditing: false,\r\n      veterinarioNombre: '' // Nombre del veterinario\r\n    };\r\n  },\r\n  created() {\r\n    this.obtenerServicios();\r\n    this.obtenerNombreVeterinario(); // Cargar el nombre del veterinario al crear el componente\r\n  },\r\n  methods: {\r\n    irADescripcion() {\r\n      // Redirige a la vista de descripción\r\n      this.$router.push({ name: 'VeterinarioConsulta2' });\r\n    },\r\n    async obtenerServicios() {\r\n      try {\r\n        const response = await axios.get('https://petandcareapi-bhbgcngtfkbufvfy.canadacentral-01.azurewebsites.net/api/servicios-domicilio');\r\n        const userId = this.$route.params.id; // Asegúrate de que userId es un número\r\n        // Filtra los servicios para mostrar solo los del veterinario correspondiente\r\n        this.servicios = response.data.filter(servicio => servicio.veterinario.id === Number(userId));\r\n      } catch (error) {\r\n        this.mensaje = 'Error al obtener servicios: ' + error.message;\r\n      }\r\n    },\r\n    async obtenerNombreVeterinario() {\r\n      try {\r\n        const userId = this.$route.params.id; // Obtener el ID del veterinario desde los parámetros de la ruta\r\n        const response = await axios.get(`https://petandcareapi-bhbgcngtfkbufvfy.canadacentral-01.azurewebsites.net/api/veterinarios/${userId}`);\r\n        this.veterinarioNombre = response.data.nombre; // Asumimos que el nombre está en la respuesta\r\n      } catch (error) {\r\n        console.error('Error al obtener el nombre del veterinario: ', error);\r\n      }\r\n    },\r\n    async guardarServicio() {\r\n      try {\r\n        if (this.isEditing) {\r\n          await axios.put(`https://petandcareapi-bhbgcngtfkbufvfy.canadacentral-01.azurewebsites.net/api/servicios-domicilio/${this.servicio.idServicio}`, this.servicio);\r\n          this.mensaje = 'Servicio actualizado exitosamente';\r\n        } else {\r\n          const response = await axios.post('https://petandcareapi-bhbgcngtfkbufvfy.canadacentral-01.azurewebsites.net/api/servicios-domicilio', this.servicio);\r\n          this.mensaje = 'Servicio solicitado exitosamente';\r\n          console.log(response);\r\n        }\r\n        this.obtenerServicios(); // Refresca la lista\r\n        this.resetForm(); // Resetea el formulario\r\n      } catch (error) {\r\n        this.mensaje = 'Error al guardar el servicio: ' + error.message;\r\n      }\r\n    },\r\n    editarServicio(servicio) {\r\n      this.servicio = { ...servicio };\r\n      this.isEditing = true;\r\n    },\r\n    async cancelarServicio(id) {\r\n      try {\r\n        await axios.delete(`https://petandcareapi-bhbgcngtfkbufvfy.canadacentral-01.azurewebsites.net/api/servicios-domicilio/${id}`);\r\n        this.mensaje = 'Servicio cancelado exitosamente';\r\n        this.obtenerServicios(); // Refresca la lista\r\n      } catch (error) {\r\n        this.mensaje = 'Error al cancelar el servicio: ' + error.message;\r\n      }\r\n    },\r\n    resetForm() {\r\n      this.servicio = {\r\n        idServicio: null,\r\n        mascota: {\r\n          id: null\r\n        },\r\n        veterinario: {\r\n          id: null\r\n        },\r\n        direccion: '',\r\n        estado: 'PENDIENTE'\r\n      };\r\n      this.isEditing = false;\r\n      this.mensaje = '';\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Puedes agregar estilos adicionales aquí si es necesario */\r\n.container {\r\n  max-width: 800px; /* Limitar el ancho del contenedor */\r\n  background-color: #f8f9fa; /* Fondo claro */\r\n  border-radius: 8px; /* Bordes redondeados */\r\n  padding: 20px; /* Espaciado interno */\r\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Sombra suave */\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}