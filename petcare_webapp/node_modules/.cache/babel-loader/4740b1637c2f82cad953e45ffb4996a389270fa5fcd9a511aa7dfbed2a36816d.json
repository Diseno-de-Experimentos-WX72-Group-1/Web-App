{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mt-5\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"alert alert-info\"\n};\nconst _hoisted_3 = {\n  class: \"mb-3\"\n};\nconst _hoisted_4 = {\n  class: \"mb-3\"\n};\nconst _hoisted_5 = {\n  class: \"mb-3\"\n};\nconst _hoisted_6 = {\n  class: \"mb-3\"\n};\nconst _hoisted_7 = {\n  type: \"submit\",\n  class: \"btn btn-primary\"\n};\nconst _hoisted_8 = {\n  key: 1,\n  class: \"alert alert-info\"\n};\nconst _hoisted_9 = {\n  class: \"table table-striped\"\n};\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[12] || (_cache[12] = _createElementVNode(\"h2\", {\n    class: \"mb-4\"\n  }, \"Solicitud de Servicio a Domicilio\", -1)), $data.veterinarioNombre ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \" ¡Hola, Dr(a). \" + _toDisplayString($data.veterinarioNombre) + \"! ¿Cómo podemos ayudarle hoy? \", 1)) : _createCommentVNode(\"\", true), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.irADescripcion && $options.irADescripcion(...args)),\n    class: \"btn btn-primary mb-4\"\n  }, \" Consultar Historial Médico \"), _createElementVNode(\"form\", {\n    onSubmit: _cache[5] || (_cache[5] = _withModifiers((...args) => $options.guardarServicio && $options.guardarServicio(...args), [\"prevent\"])),\n    class: \"mb-4\"\n  }, [_createElementVNode(\"div\", _hoisted_3, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    for: \"mascotaId\",\n    class: \"form-label\"\n  }, \"ID de Mascota:\", -1)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    id: \"mascotaId\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.servicio.mascota.id = $event),\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.servicio.mascota.id]])]), _createElementVNode(\"div\", _hoisted_4, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    for: \"veterinarioId\",\n    class: \"form-label\"\n  }, \"ID de Veterinario:\", -1)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    id: \"veterinarioId\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.servicio.veterinario.id = $event),\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.servicio.veterinario.id]])]), _createElementVNode(\"div\", _hoisted_5, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    for: \"direccion\",\n    class: \"form-label\"\n  }, \"Dirección:\", -1)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"direccion\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.servicio.direccion = $event),\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.servicio.direccion]])]), _createElementVNode(\"div\", _hoisted_6, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    for: \"estado\",\n    class: \"form-label\"\n  }, \"Estado:\", -1)), _withDirectives(_createElementVNode(\"select\", {\n    id: \"estado\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.servicio.estado = $event),\n    class: \"form-select\"\n  }, _cache[9] || (_cache[9] = [_createElementVNode(\"option\", {\n    value: \"PENDIENTE\"\n  }, \"Pendiente\", -1), _createElementVNode(\"option\", {\n    value: \"REALIZADO\"\n  }, \"Realizado\", -1), _createElementVNode(\"option\", {\n    value: \"CANCELADO\"\n  }, \"Cancelado\", -1)]), 512), [[_vModelSelect, $data.servicio.estado]])]), _createElementVNode(\"button\", _hoisted_7, _toDisplayString($data.isEditing ? 'Actualizar Servicio' : 'Solicitar Servicio'), 1)], 32), $data.mensaje ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _toDisplayString($data.mensaje), 1)) : _createCommentVNode(\"\", true), _cache[13] || (_cache[13] = _createElementVNode(\"h3\", null, \"Servicios Programados\", -1)), _createElementVNode(\"table\", _hoisted_9, [_cache[11] || (_cache[11] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"ID\"), _createElementVNode(\"th\", null, \"Dirección\"), _createElementVNode(\"th\", null, \"Fecha de Solicitud\"), _createElementVNode(\"th\", null, \"Estado\"), _createElementVNode(\"th\", null, \"Acciones\")])], -1)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.servicios, servicio => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: servicio.idServicio\n    }, [_createElementVNode(\"td\", null, _toDisplayString(servicio.idServicio), 1), _createElementVNode(\"td\", null, _toDisplayString(servicio.direccion), 1), _createElementVNode(\"td\", null, _toDisplayString(servicio.fechaSolicitud), 1), _createElementVNode(\"td\", null, _toDisplayString(servicio.estado), 1), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.editarServicio(servicio),\n      class: \"btn btn-warning btn-sm\"\n    }, \"Editar\", 8, _hoisted_10), _createElementVNode(\"button\", {\n      onClick: $event => $options.cancelarServicio(servicio.idServicio),\n      class: \"btn btn-danger btn-sm\"\n    }, \"Cancelar\", 8, _hoisted_11)])]);\n  }), 128))])])]);\n}","map":{"version":3,"names":["class","key","type","_createElementBlock","_hoisted_1","_createElementVNode","$data","veterinarioNombre","_hoisted_2","_toDisplayString","_createCommentVNode","onClick","_cache","args","$options","irADescripcion","onSubmit","_withModifiers","guardarServicio","_hoisted_3","for","id","$event","servicio","mascota","required","_hoisted_4","veterinario","_hoisted_5","direccion","_hoisted_6","estado","value","_hoisted_7","isEditing","mensaje","_hoisted_8","_hoisted_9","_Fragment","_renderList","servicios","idServicio","fechaSolicitud","editarServicio","_hoisted_10","cancelarServicio","_hoisted_11"],"sources":["D:\\CAMILA\\UPC\\Ciclo 6\\Diseño de Experimentos\\Trabajo grupal\\Web-App\\petcare_webapp\\src\\components\\DashboardVeterinario.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mt-5\">\r\n    <h2 class=\"mb-4\">Solicitud de Servicio a Domicilio</h2>\r\n    <div class=\"alert alert-info\" v-if=\"veterinarioNombre\">\r\n      ¡Hola, Dr(a). {{ veterinarioNombre }}! ¿Cómo podemos ayudarle hoy?\r\n    </div>\r\n    \r\n    <button @click=\"irADescripcion\" class=\"btn btn-primary mb-4\">\r\n      Consultar Historial Médico\r\n    </button>\r\n\r\n    <form @submit.prevent=\"guardarServicio\" class=\"mb-4\">\r\n      <div class=\"mb-3\">\r\n        <label for=\"mascotaId\" class=\"form-label\">ID de Mascota:</label>\r\n        <input \r\n          type=\"number\" \r\n          id=\"mascotaId\" \r\n          v-model=\"servicio.mascota.id\" \r\n          class=\"form-control\" \r\n          required \r\n        />\r\n      </div>\r\n      <div class=\"mb-3\">\r\n        <label for=\"veterinarioId\" class=\"form-label\">ID de Veterinario:</label>\r\n        <input \r\n          type=\"number\" \r\n          id=\"veterinarioId\" \r\n          v-model=\"servicio.veterinario.id\" \r\n          class=\"form-control\" \r\n          required \r\n        />\r\n      </div>\r\n      <div class=\"mb-3\">\r\n        <label for=\"direccion\" class=\"form-label\">Dirección:</label>\r\n        <input \r\n          type=\"text\" \r\n          id=\"direccion\" \r\n          v-model=\"servicio.direccion\" \r\n          class=\"form-control\" \r\n          required \r\n        />\r\n      </div>\r\n      <div class=\"mb-3\">\r\n        <label for=\"estado\" class=\"form-label\">Estado:</label>\r\n        <select \r\n          id=\"estado\" \r\n          v-model=\"servicio.estado\" \r\n          class=\"form-select\"\r\n        >\r\n          <option value=\"PENDIENTE\">Pendiente</option>\r\n          <option value=\"REALIZADO\">Realizado</option>\r\n          <option value=\"CANCELADO\">Cancelado</option>\r\n        </select>\r\n      </div>\r\n      <button type=\"submit\" class=\"btn btn-primary\">\r\n        {{ isEditing ? 'Actualizar Servicio' : 'Solicitar Servicio' }}\r\n      </button>\r\n    </form>\r\n\r\n    <div v-if=\"mensaje\" class=\"alert alert-info\">{{ mensaje }}</div>\r\n\r\n    <h3>Servicios Programados</h3>\r\n    <table class=\"table table-striped\">\r\n      <thead>\r\n        <tr>\r\n          <th>ID</th>\r\n          <th>Dirección</th>\r\n          <th>Fecha de Solicitud</th>\r\n          <th>Estado</th>\r\n          <th>Acciones</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"servicio in servicios\" :key=\"servicio.idServicio\">\r\n          <td>{{ servicio.idServicio }}</td>\r\n          <td>{{ servicio.direccion }}</td>\r\n          <td>{{ servicio.fechaSolicitud }}</td>\r\n          <td>{{ servicio.estado }}</td>\r\n          <td>\r\n            <button @click=\"editarServicio(servicio)\" class=\"btn btn-warning btn-sm\">Editar</button>\r\n            <button @click=\"cancelarServicio(servicio.idServicio)\" class=\"btn btn-danger btn-sm\">Cancelar</button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      servicios: [],\r\n      servicio: {\r\n        idServicio: null,\r\n        mascota: {\r\n          id: null\r\n        },\r\n        veterinario: {\r\n          id: null\r\n        },\r\n        direccion: '',\r\n        estado: 'PENDIENTE' // Estado predeterminado\r\n      },\r\n      mensaje: '',\r\n      isEditing: false,\r\n      veterinarioNombre: '' // Nombre del veterinario\r\n    };\r\n  },\r\n  created() {\r\n    this.obtenerServicios();\r\n    this.obtenerNombreVeterinario(); // Cargar el nombre del veterinario al crear el componente\r\n  },\r\n  methods: {\r\n    irADescripcion() {\r\n      // Redirige a la vista de descripción\r\n      this.$router.push({ name: 'VeterinarioConsulta2' });\r\n    },\r\n    async obtenerServicios() {\r\n      try {\r\n        const response = await axios.get('https://java3000-g8cthucjhvgad2c3.canadacentral-01.azurewebsites.net/api/servicios-domicilio');\r\n        const userId = this.$route.params.id; // Asegúrate de que userId es un número\r\n        // Filtra los servicios para mostrar solo los del veterinario correspondiente\r\n        this.servicios = response.data.filter(servicio => servicio.veterinario.id === Number(userId));\r\n      } catch (error) {\r\n        this.mensaje = 'Error al obtener servicios: ' + error.message;\r\n      }\r\n    },\r\n    async obtenerNombreVeterinario() {\r\n      try {\r\n        const userId = this.$route.params.id; // Obtener el ID del veterinario desde los parámetros de la ruta\r\n        const response = await axios.get(`https://java3000-g8cthucjhvgad2c3.canadacentral-01.azurewebsites.net/api/veterinarios/${userId}`);\r\n        this.veterinarioNombre = response.data.nombre; // Asumimos que el nombre está en la respuesta\r\n      } catch (error) {\r\n        console.error('Error al obtener el nombre del veterinario: ', error);\r\n      }\r\n    },\r\n    async guardarServicio() {\r\n      try {\r\n        if (this.isEditing) {\r\n          await axios.put(`https://java3000-g8cthucjhvgad2c3.canadacentral-01.azurewebsites.net/api/servicios-domicilio/${this.servicio.idServicio}`, this.servicio);\r\n          this.mensaje = 'Servicio actualizado exitosamente';\r\n        } else {\r\n          const response = await axios.post('https://java3000-g8cthucjhvgad2c3.canadacentral-01.azurewebsites.net/api/servicios-domicilio', this.servicio);\r\n          this.mensaje = 'Servicio solicitado exitosamente';\r\n          console.log(response);\r\n        }\r\n        this.obtenerServicios(); // Refresca la lista\r\n        this.resetForm(); // Resetea el formulario\r\n      } catch (error) {\r\n        this.mensaje = 'Error al guardar el servicio: ' + error.message;\r\n      }\r\n    },\r\n    editarServicio(servicio) {\r\n      this.servicio = { ...servicio };\r\n      this.isEditing = true;\r\n    },\r\n    async cancelarServicio(id) {\r\n      try {\r\n        await axios.delete(`https://java3000-g8cthucjhvgad2c3.canadacentral-01.azurewebsites.net/api/servicios-domicilio/${id}`);\r\n        this.mensaje = 'Servicio cancelado exitosamente';\r\n        this.obtenerServicios(); // Refresca la lista\r\n      } catch (error) {\r\n        this.mensaje = 'Error al cancelar el servicio: ' + error.message;\r\n      }\r\n    },\r\n    resetForm() {\r\n      this.servicio = {\r\n        idServicio: null,\r\n        mascota: {\r\n          id: null\r\n        },\r\n        veterinario: {\r\n          id: null\r\n        },\r\n        direccion: '',\r\n        estado: 'PENDIENTE'\r\n      };\r\n      this.isEditing = false;\r\n      this.mensaje = '';\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Puedes agregar estilos adicionales aquí si es necesario */\r\n.container {\r\n  max-width: 800px; /* Limitar el ancho del contenedor */\r\n  background-color: #f8f9fa; /* Fondo claro */\r\n  border-radius: 8px; /* Bordes redondeados */\r\n  padding: 20px; /* Espaciado interno */\r\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Sombra suave */\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}