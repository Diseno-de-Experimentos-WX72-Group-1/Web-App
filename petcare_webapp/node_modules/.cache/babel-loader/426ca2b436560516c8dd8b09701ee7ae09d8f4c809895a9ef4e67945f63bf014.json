{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'App',\n  data() {\n    return {\n      idMascota: null,\n      historial: [],\n      mensaje: '',\n      loading: false // New loading state\n    };\n  },\n  methods: {\n    async buscarHistorial() {\n      this.loading = true; // Set loading to true before request\n      this.mensaje = ''; // Reset message\n      // Validación adicional\n      if (this.idMascota <= 0) {\n        this.mensaje = 'Por favor, ingrese un ID de mascota válido.';\n        this.loading = false;\n        return;\n      }\n      try {\n        const response = await axios.get(`https://petandcareapi-bhbgcngtfkbufvfy.canadacentral-01.azurewebsites.net/api/historial-medico/mascota/${this.idMascota}`);\n        this.historial = response.data;\n        if (this.historial.length === 0) {\n          this.mensaje = 'No se encontró historial médico para esta mascota.';\n        }\n      } catch (error) {\n        this.mensaje = 'Error al buscar el historial médico: ' + error.message;\n      } finally {\n        this.loading = false; // Set loading to false after request\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","idMascota","historial","mensaje","loading","methods","buscarHistorial","response","get","length","error","message"],"sources":["D:\\CAMILA\\UPC\\Ciclo 6\\Diseño de Experimentos\\Trabajo grupal\\Web-App\\petcare_webapp\\src\\components\\HistorialMedico.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <div class=\"d-flex\">\r\n      <!-- Sidebar -->\r\n      <nav class=\"col-md-2 d-none d-md-block bg-light sidebar shadow-sm\">\r\n        <div class=\"sidebar-sticky p-3\">\r\n          <h5 class=\"sidebar-heading text-center mb-4 text-primary\">Dashboard</h5>\r\n          <ul class=\"nav flex-column\">\r\n            <li class=\"nav-item mb-2\">\r\n              <router-link to=\"/usuarios\" class=\"nav-link d-flex align-items-center\">\r\n                <i class=\"bi bi-person-circle mr-2\"></i> Usuarios\r\n              </router-link>\r\n            </li>\r\n            <li class=\"nav-item mb-2\">\r\n              <router-link to=\"/citas\" class=\"nav-link d-flex align-items-center\">\r\n                <i class=\"bi bi-calendar-check mr-2\"></i> Programar Cita\r\n              </router-link>\r\n            </li>\r\n            <li class=\"nav-item mb-2\">\r\n              <router-link to=\"/listar_citas\" class=\"nav-link d-flex align-items-center\">\r\n                <i class=\"bi bi-list-check mr-2\"></i> Listar Citas\r\n              </router-link>\r\n            </li>\r\n            <li class=\"nav-item mb-2\">\r\n              <router-link to=\"/servicio_domicilio\" class=\"nav-link d-flex align-items-center\">\r\n                <i class=\"bi bi-house-door mr-2\"></i> Servicio Domicilio\r\n              </router-link>\r\n            </li>\r\n            <li class=\"nav-item mb-2\">\r\n              <router-link to=\"/historial_medico\" class=\"nav-link d-flex align-items-center\">\r\n                <i class=\"bi bi-file-medical mr-2\"></i> Historial Médico\r\n              </router-link>\r\n            </li>\r\n            <li class=\"nav-item mb-2\">\r\n              <router-link to=\"/generar_reporte\" class=\"nav-link d-flex align-items-center\">\r\n                <i class=\"bi bi-bar-chart mr-2\"></i> Generar Reporte\r\n              </router-link>\r\n            </li>\r\n            <li class=\"nav-item mb-2\">\r\n              <router-link to=\"/lista_recordatorios\" class=\"nav-link d-flex align-items-center\">\r\n                <i class=\"bi bi-bell mr-2\"></i> Lista Recordatorios\r\n              </router-link>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </nav>\r\n\r\n      <!-- Main content -->\r\n      <main role=\"main\" class=\"col-md-9 ml-sm-auto col-lg-10 px-4\">\r\n        <div class=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom shadow-sm\">\r\n          <h1 class=\"h2\">Bienvenido al Dashboard</h1>\r\n          <button class=\"btn btn-outline-primary d-md-none\" type=\"button\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#offcanvasSidebar\">\r\n            <i class=\"bi bi-list\"></i>\r\n          </button>\r\n        </div>\r\n\r\n        <!-- Historial Médico -->\r\n        <div class=\"container mt-4\">\r\n          <h2 class=\"mb-4\">Historial Médico</h2>\r\n\r\n          <!-- Formulario para buscar historial de una mascota -->\r\n          <form @submit.prevent=\"buscarHistorial\" class=\"mb-4\">\r\n            <div class=\"input-group\">\r\n              <label class=\"input-group-text\" for=\"idMascota\">ID de Mascota:</label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"idMascota\"\r\n                v-model=\"idMascota\"\r\n                required\r\n                class=\"form-control\"\r\n                min=\"1\"\r\n              />\r\n              <button type=\"submit\" class=\"btn btn-primary\">Buscar Historial</button>\r\n            </div>\r\n          </form>\r\n\r\n          <!-- Mostrar mensaje de error si hay problemas -->\r\n          <div v-if=\"mensaje\" class=\"alert alert-danger\" role=\"alert\">\r\n            {{ mensaje }}\r\n          </div>\r\n\r\n          <!-- Mostrar el historial médico -->\r\n          <div v-if=\"historial.length > 0\">\r\n            <h3 class=\"mt-4\">Historial Médico de Mascota ID: {{ idMascota }}</h3>\r\n            <table class=\"table table-striped\">\r\n              <thead>\r\n                <tr>\r\n                  <th>ID Historial</th>\r\n                  <th>Descripción</th>\r\n                  <th>Fecha</th>\r\n                  <th>Veterinario</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"registro in historial\" :key=\"registro.idHistorial\">\r\n                  <td>{{ registro.idHistorial }}</td>\r\n                  <td>{{ registro.descripcion }}</td>\r\n                  <td>{{ registro.fecha }}</td>\r\n                  <td>{{ registro.veterinario.nombre }}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div v-else-if=\"loading\" class=\"alert alert-info\" role=\"alert\">\r\n            Cargando historial médico...\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Rutas del contenido -->\r\n        <router-view></router-view>\r\n      </main>\r\n\r\n      <!-- Offcanvas Sidebar for mobile -->\r\n      <div class=\"offcanvas offcanvas-start bg-light\" tabindex=\"-1\" id=\"offcanvasSidebar\">\r\n        <div class=\"offcanvas-header\">\r\n          <h5 class=\"offcanvas-title\">Dashboard</h5>\r\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\"></button>\r\n        </div>\r\n        <div class=\"offcanvas-body\">\r\n          <ul class=\"nav flex-column\">\r\n            <li class=\"nav-item mb-2\">\r\n              <router-link to=\"/usuarios\" class=\"nav-link\">\r\n                <i class=\"bi bi-person-circle\"></i> Usuarios\r\n              </router-link>\r\n            </li>\r\n            <li class=\"nav-item mb-2\">\r\n              <router-link to=\"/citas\" class=\"nav-link\">\r\n                <i class=\"bi bi-calendar-check\"></i> Programar Cita\r\n              </router-link>\r\n            </li>\r\n            <li class=\"nav-item mb-2\">\r\n              <router-link to=\"/listar_citas\" class=\"nav-link\">\r\n                <i class=\"bi bi-list-check\"></i> Listar Citas\r\n              </router-link>\r\n            </li>\r\n            <li class=\"nav-item mb-2\">\r\n              <router-link to=\"/servicio_domicilio\" class=\"nav-link\">\r\n                <i class=\"bi bi-house-door\"></i> Servicio Domicilio\r\n              </router-link>\r\n            </li>\r\n            <li class=\"nav-item mb-2\">\r\n              <router-link to=\"/historial_medico\" class=\"nav-link\">\r\n                <i class=\"bi bi-file-medical\"></i> Historial Médico\r\n              </router-link>\r\n            </li>\r\n            <li class=\"nav-item mb-2\">\r\n              <router-link to=\"/generar_reporte\" class=\"nav-link\">\r\n                <i class=\"bi bi-bar-chart\"></i> Generar Reporte\r\n              </router-link>\r\n            </li>\r\n            <li class=\"nav-item mb-2\">\r\n              <router-link to=\"/lista_recordatorios\" class=\"nav-link\">\r\n                <i class=\"bi bi-bell\"></i> Lista Recordatorios\r\n              </router-link>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'App',\r\n  data() {\r\n    return {\r\n      idMascota: null,\r\n      historial: [],\r\n      mensaje: '',\r\n      loading: false // New loading state\r\n    };\r\n  },\r\n  methods: {\r\n    async buscarHistorial() {\r\n      this.loading = true; // Set loading to true before request\r\n      this.mensaje = ''; // Reset message\r\n      // Validación adicional\r\n      if (this.idMascota <= 0) {\r\n        this.mensaje = 'Por favor, ingrese un ID de mascota válido.';\r\n        this.loading = false;\r\n        return;\r\n      }\r\n      try {\r\n        const response = await axios.get(`https://petandcareapi-bhbgcngtfkbufvfy.canadacentral-01.azurewebsites.net/api/historial-medico/mascota/${this.idMascota}`);\r\n        this.historial = response.data;\r\n        if (this.historial.length === 0) {\r\n          this.mensaje = 'No se encontró historial médico para esta mascota.';\r\n        }\r\n      } catch (error) {\r\n        this.mensaje = 'Error al buscar el historial médico: ' + error.message;\r\n      } finally {\r\n        this.loading = false; // Set loading to false after request\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.sidebar {\r\n  height: 100vh;\r\n  box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.1); /* Sombra en el sidebar */\r\n  padding-top: 20px;\r\n}\r\n\r\n.sidebar-heading {\r\n  font-weight: bold;\r\n  color: #007bff;\r\n}\r\n\r\n.nav-link {\r\n  font-size: 1rem;\r\n  padding: 10px;\r\n  color: #333;\r\n}\r\n\r\n.nav-link:hover {\r\n  background-color: #f8f9fa;\r\n  border-radius: 5px;\r\n}\r\n\r\n.nav-link .bi {\r\n  margin-right: 8px;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.offcanvas-body .nav-link {\r\n  font-size: 1rem;\r\n  color: #007bff;\r\n}\r\n\r\n.alert {\r\n  margin-top: 20px;\r\n}\r\n\r\n.table th {\r\n  background-color: #007bff;\r\n  color: white;\r\n}\r\n\r\n.table-striped tbody tr:nth-of-type(odd) {\r\n  background-color: #f2f2f2;\r\n}\r\n</style>\r\n"],"mappings":"AAmKA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,KAAK;EACXC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE,IAAI;MACfC,SAAS,EAAE,EAAE;MACbC,OAAO,EAAE,EAAE;MACXC,OAAO,EAAE,KAAI,CAAE;IACjB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,eAAeA,CAAA,EAAG;MACtB,IAAI,CAACF,OAAM,GAAI,IAAI,EAAE;MACrB,IAAI,CAACD,OAAM,GAAI,EAAE,EAAE;MACnB;MACA,IAAI,IAAI,CAACF,SAAQ,IAAK,CAAC,EAAE;QACvB,IAAI,CAACE,OAAM,GAAI,6CAA6C;QAC5D,IAAI,CAACC,OAAM,GAAI,KAAK;QACpB;MACF;MACA,IAAI;QACF,MAAMG,QAAO,GAAI,MAAMT,KAAK,CAACU,GAAG,CAAC,0GAA0G,IAAI,CAACP,SAAS,EAAE,CAAC;QAC5J,IAAI,CAACC,SAAQ,GAAIK,QAAQ,CAACP,IAAI;QAC9B,IAAI,IAAI,CAACE,SAAS,CAACO,MAAK,KAAM,CAAC,EAAE;UAC/B,IAAI,CAACN,OAAM,GAAI,oDAAoD;QACrE;MACF,EAAE,OAAOO,KAAK,EAAE;QACd,IAAI,CAACP,OAAM,GAAI,uCAAsC,GAAIO,KAAK,CAACC,OAAO;MACxE,UAAU;QACR,IAAI,CAACP,OAAM,GAAI,KAAK,EAAE;MACxB;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}